<!--
  Build file defines DSpace tasks performed by Tomcat Manager
-->

<project name="DSpace" default="help">

  <!-- ============================================================= -->
  <!-- Description                                                   -->
  <!-- ============================================================= -->
  <description>
====================== Tomcat Manager tasks ============================

Common usage:

  Invoked by Jenkins to reload web apps after a successful build
    % ant reload
    
========================================================================
  </description>

  <!-- Configure the context path for this application -->
  <property name="xmlui.context.path"     value="/xmlui"/>

  <!-- 
    Configure properties to access the Manager application. 
  -->
  <property name="tomcat-manager.url" value="http://localhost:8080/manager"/>
  
  <!-- 
    Set tomcat user name and password in user-specific Maven settings file, 
    probably $HOME/.m2/settings.xml
  -->

  <!-- Configure the custom Ant tasks for the Manager application -->
  <taskdef name="reload"    classname="org.apache.catalina.ant.ReloadTask"/>

  <!-- Executable Targets -->
  <target name="reload" description="Reload web application">
    <reload  
      url="${tomcat-manager.url}" 
      username="${tomcat-manager.username}" 
      password="${tomcat-manager.password}" 
      path="${xmlui.context.path}"/>
  </target>

</project>